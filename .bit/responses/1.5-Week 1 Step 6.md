---
files: app.js
week: 1
step: 5
name: Week 1 Step 6
---

## Week 1 Step 6

### Let's Get The Tweets

```jsx
function getTweets() {
    // Already in JSON format
    T.get('search/tweets', { q: '#btsarmy since:2021-02-08', count: 10 , language: 'en'}, function(err, data, response) {
        for(var i = 0; i < 10; i++) {
            //console.log(data.statuses[i].id_str);
            var dup = findDuplicate(data.statuses[i].id_str);
            if(dup == 0) {
                db.get('tweets')
                    .push({ id: data.statuses[i].id_str, title: data.statuses[i].text, emotion: "empty", user: data.statuses[i].user.screen_name})
                    .write()
            }
        }
    })

    return new Promise(resolve => {
        setTimeout(() => {
          resolve('resolved');
        }, 2000);
    });
}
```

```jsx
async function getEmotion() {
    //loop through db
    const result = await getTweets();
    console.log(result);
    // expected output: "resolved"

    const size = db.get('tweets').size().value();
    for (var i = 0; i < size; i++) {
        // read i-th entry in db: npmjs.com/package/lowdb
        const inputTweet = db.get('tweets['+i+'].title').value();

        const sentimentInput = [
                inputTweet
        ];

        const id = db.get('tweets['+i+'].id').value();

        // analyzeSentiment on the title of db i-th entry
        sentimentAnalysis(textAnalyticsClient, sentimentInput, id);
    }
}
```
